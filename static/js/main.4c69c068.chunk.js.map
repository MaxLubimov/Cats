{"version":3,"sources":["store.js","CatList.jsx","FavortieList.jsx","index.jsx"],"names":["initState","likedPosts","allPosts","liked","id","url","event","localStorage","setItem","store","dispatch","type","payload","likePost","target","classList","toggle","createStore","state","action","newSelecredIds","some","ids","removeItem","filter","concat","addLikePost","data","window","__REDUX_DEVTOOLS_EXTENSION__","CatList","this","props","Store","className","map","style","backgroundImage","onClick","value","name","Component","connect","FavoriteList","FavoriteListId","length","item","App","useDispatch","useState","fetching","setFetching","currentPage","setCurrentPage","active","setActive","Selection","setSelection","useEffect","document","addEventListener","scrollHander","removeEventListener","i","key","getItem","a","fetch","res","prevState","json","response","fetchData","finally","e","documentElement","scrollHeight","scrollTop","innerHeight","toggleContent","currentState","preventDefault","autoFocus","switchContent","rootElement","querySelector","ReactDOM","render"],"mappings":"gPAiCMA,EAAY,CAChBC,WAAY,GACZC,SAAU,IA4CCC,EAAQ,SAACC,EAAIC,EAAKC,GAC7BC,aAAaC,QAAQJ,EAAIC,GACzBI,EAAMC,SA/ES,SAACN,EAAIC,GACpB,MAAO,CACLM,KAAM,cACNC,QAAS,CACPR,KACAC,QA0EWQ,CAAST,EAAIC,IAC5BC,EAAMQ,OAAOC,UAAUC,OAAO,UAC9BV,EAAMQ,OAAOC,UAAUC,OAAO,SAG1BP,EAAQQ,aAhDK,WAAgC,IAA/BC,EAA8B,uDAAtBlB,EAAWmB,EAAW,uCAChD,OAAQA,EAAOR,MACb,IAAK,cACH,IAAIS,EAYJ,OAXIF,EAAMjB,WAAWoB,MAAK,SAAAC,GAAG,OAAIA,EAAIlB,KAAOe,EAAOP,QAAQR,OACzDG,aAAagB,WAAWJ,EAAOP,QAAQR,IACvCgB,EAAiBF,EAAMjB,WAAWuB,QAAO,SAAAF,GAAG,OAAIA,EAAIlB,KAAOe,EAAOP,QAAQR,QAG1EG,aAAaC,QAAQW,EAAOP,QAAQR,GAAIe,EAAOP,QAAQP,KACvDe,EAAiBF,EAAMjB,WAAWwB,OAAO,CACvCrB,GAAIe,EAAOP,QAAQR,GACnBC,IAAKc,EAAOP,QAAQP,OAGjB,2BACFa,GADL,IAEEjB,WAAYmB,IAEhB,IAAK,oBACH,IAAIM,EAAcR,EAAMjB,WAAWoB,MAAK,SAAAC,GAAG,OAAIA,EAAIlB,KAAOe,EAAOP,QAAQR,MACrEc,EAAMjB,WACNiB,EAAMjB,WAAWwB,OAAO,CACxBrB,GAAIe,EAAOP,QAAQR,GACnBC,IAAKc,EAAOP,QAAQP,MAExB,OAAO,2BACFa,GADL,IAEEjB,WAAYyB,IAEhB,IAAK,WACH,OAAO,2BACFR,GADL,IAEEhB,SAAUgB,EAAMhB,SAASuB,OAAON,EAAOP,QAAQe,QAEnD,QACE,OAAOT,KAcXU,OAAOC,8BAAgCD,OAAOC,gCAGjCpB,I,OCtFTqB,E,4JACJ,WAAU,IAAD,OACDH,EAAOI,KAAKC,MAAMC,MAAM/B,SAC9B,OACE,qBAAKgC,UAAU,YAAf,SACE,oBAAIA,UAAU,YAAd,SACGP,EAAKQ,KAAI,SAAAR,GAAI,OACZ,oBACEO,UAAU,WAEVE,MAAO,CACLC,gBAAgB,QAAD,OAAUV,EAAKtB,IAAf,OAJnB,SAOE,uBACEiC,QAAS,SAAChC,GAAD,OAAWH,EAAMwB,EAAKvB,GAAIuB,EAAKtB,IAAKC,IAC7CK,KAAK,SACLuB,UAAS,sBAAiB,EAAKF,MAAMC,MAAMhC,WAAWoB,MAAK,SAAAC,GAAG,OAAIA,EAAIlB,KAAOuB,EAAKvB,MAAM,OAAS,UACjGmC,MAAM,GACNC,KAAK,MAVFb,EAAKvB,e,GATFqC,aA6BPC,eACb,SAAAxB,GAAK,MAAK,CACRe,MAAOf,KAFIwB,CAIbZ,GChCIa,E,4JACJ,WACE,IAAMC,EAAiBb,KAAKC,MAAMC,MAAMhC,WACxC,OAC4B,IAA1B2C,EAAeC,QAEb,qBAAKX,UAAU,YAAf,SACE,oBAAIA,UAAU,YAAd,SACGU,EAAeT,KAAI,SAAAW,GAAI,OACtB,oBACEZ,UAAU,WAEVE,MAAO,CACLC,gBAAgB,QAAD,OAAUS,EAAKzC,IAAf,OAJnB,SAOE,uBACEiC,QAAS,SAACJ,GAAD,OAAe/B,EAAM2C,EAAK1C,GAAI0C,EAAKzC,IAAK6B,IACjDvB,KAAK,SACLuB,UAAU,iBACVK,MAAM,GACNC,KAAK,MAVFM,EAAK1C,e,GAXCqC,aAgCZC,eACb,SAAAxB,GAAK,MAAK,CACRe,MAAOf,KAFIwB,CAIbC,G,MClCF,SAASI,IACP,IAAMrC,EAAWsC,cADJ,EAEmBC,oBAAS,GAF5B,mBAENC,EAFM,KAEIC,EAFJ,OAGyBF,mBAAS,GAHlC,mBAGNG,EAHM,KAGOC,EAHP,OAIeJ,oBAAS,GAJxB,mBAINK,EAJM,KAIEC,EAJF,OAKqBN,mBAAS,WAL9B,mBAKNO,EALM,KAKKC,EALL,KAQbC,qBAAU,WAER,OADAC,SAASC,iBAAiB,SAAUC,GAC7B,WACLF,SAASG,oBAAoB,SAAUD,MAExC,IAEHH,qBAAU,WACR,IAAK,IAAIK,EAAI,EAAGA,EAAIxD,aAAasC,OAAQkB,IAAK,CAC5C,IAAIC,EAAMzD,aAAayD,IAAID,GAC3BrD,GHbwBN,EGaD4D,EHbK3D,EGaAE,aAAa0D,QAAQD,GHZ9C,CACLrD,KAAM,oBACNC,QAAS,CACPR,KACAC,UALuB,IAACD,EAAIC,KGkBhCqD,qBAAU,WACJR,GACa,uCAAG,8BAAAgB,EAAA,sEACAC,MAAM,4DAAD,OACyCf,IAF9C,cACZgB,EADY,OAIhBf,GAAe,SAAAgB,GAAS,OAAIA,EAAY,KAJxB,SAKKD,EAAIE,OALT,OAKZC,EALY,OAMhB7D,EHfC,CACLC,KAAM,WACNC,QAAS,CACPe,KGYoB4C,KANF,2CAAH,oDAQfC,GAAYC,SAAQ,kBAAMtB,GAAY,QAEvC,CAACD,IAIJ,IAAMW,EAAe,SAACa,GAChBA,EAAE5D,OAAO6D,gBAAgBC,cAAgBF,EAAE5D,OAAO6D,gBAAgBE,UAAYjD,OAAOkD,aAAe,KAAO3B,GAAY,IAIvH4B,EAAgB,SAACzE,GACrB,IAAM0E,EAAe1B,EACrBhD,EAAM2E,iBACNxB,EAAanD,EAAMQ,OAAOyB,OAC1BgB,GAAWyB,IAeb,OACE,qCACE,wBAAQ9C,UAAU,SAAlB,SACE,qBAAKA,UAAU,YAAf,SACE,sBAAKA,UAAU,YAAf,UACE,wBAAQgD,WAAS,EAAChD,UAAyB,YAAdsB,EAA0B,SAAW,KAAMjB,MAAM,UAAUD,QAASyC,EAAjG,qEACA,wBAAQ7C,UAAyB,iBAAdsB,EAA+B,SAAW,KAAMjB,MAAM,eAAeD,QAASyC,EAAjG,8FAjBY,SAACxC,GACrB,OAAQA,GACN,IAAK,UACH,OAAO,cAAC,EAAD,IACT,IAAK,eACH,OAAO,cAAC,EAAD,IACT,QACE,OAAO,MAcR4C,CAAc3B,MAKrB,IAAM4B,EAAczB,SAAS0B,cAAc,SAC3CC,IAASC,OACP,cAAC,IAAD,CAAU9E,MAAOA,EAAjB,SACE,cAACsC,EAAD,MAEFqC,K","file":"static/js/main.4c69c068.chunk.js","sourcesContent":["import { createStore } from 'redux';\r\n\r\nconst likePost = (id, url) => {\r\n  return {\r\n    type: 'TOOGLE_LIKE',\r\n    payload: {\r\n      id,\r\n      url,\r\n    }\r\n  };\r\n};\r\n\r\n// добавляет данные иp localStorage о лайкнутых котах\r\nexport const addToLikePost = (id, url) => {\r\n  return {\r\n    type: 'ADD_TOO_LIKE_POST',\r\n    payload: {\r\n      id,\r\n      url,\r\n    }\r\n  };\r\n};\r\n\r\nexport const allPosts = (data) => {\r\n  return {\r\n    type: 'ALLPOSTS',\r\n    payload: {\r\n      data\r\n    }\r\n  };\r\n};\r\n\r\n\r\nconst initState = {\r\n  likedPosts: [],\r\n  allPosts: [],\r\n};\r\n\r\nconst likeRducer = (state = initState, action) => {\r\n  switch (action.type) {\r\n    case 'TOOGLE_LIKE':\r\n      let newSelecredIds\r\n      if (state.likedPosts.some(ids => ids.id === action.payload.id)) {\r\n        localStorage.removeItem(action.payload.id)\r\n        newSelecredIds = state.likedPosts.filter(ids => ids.id !== action.payload.id)\r\n      }\r\n      else {\r\n        localStorage.setItem(action.payload.id, action.payload.url)\r\n        newSelecredIds = state.likedPosts.concat({\r\n          id: action.payload.id,\r\n          url: action.payload.url\r\n        })\r\n      }\r\n      return {\r\n        ...state,\r\n        likedPosts: newSelecredIds,\r\n      };\r\n    case 'ADD_TOO_LIKE_POST':\r\n      let addLikePost = state.likedPosts.some(ids => ids.id === action.payload.id)\r\n        ? state.likedPosts\r\n        : state.likedPosts.concat({\r\n          id: action.payload.id,\r\n          url: action.payload.url\r\n        })\r\n      return {\r\n        ...state,\r\n        likedPosts: addLikePost\r\n      };\r\n    case 'ALLPOSTS':\r\n      return {\r\n        ...state,\r\n        allPosts: state.allPosts.concat(action.payload.data)\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n// добавление/удаление поста из стор\r\nexport const liked = (id, url, event) => {\r\n  localStorage.setItem(id, url);\r\n  store.dispatch(likePost(id, url));\r\n  event.target.classList.toggle('unlike');\r\n  event.target.classList.toggle('like');\r\n};\r\n\r\nconst store = createStore(\r\n  likeRducer,\r\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__(),\r\n);\r\n\r\nexport default store;\r\n\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { liked } from './store'\r\n\r\n// рендер всех котиков\r\nclass CatList extends Component {\r\n  render() {\r\n    const data = this.props.Store.allPosts;\r\n    return (\r\n      <div className=\"container\">\r\n        <ul className=\"cat-cards\">\r\n          {data.map(data => (\r\n            <li\r\n              className=\"cat-card\"\r\n              key={data.id}\r\n              style={{\r\n                backgroundImage: `url(\"${data.url}\")`\r\n              }}\r\n            >\r\n              <input\r\n                onClick={(event) => liked(data.id, data.url, event)}\r\n                type=\"button\"\r\n                className={`heart-img + ${this.props.Store.likedPosts.some(ids => ids.id === data.id) ? 'like' : 'unlike'}`}\r\n                value=\"\"\r\n                name=\"\"\r\n              />\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  state => ({\r\n    Store: state\r\n  })\r\n)(CatList)\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { liked } from './store';\r\n\r\n\r\n// рендер лайкнутых котиков\r\nclass FavoriteList extends Component {\r\n  render() {\r\n    const FavoriteListId = this.props.Store.likedPosts;\r\n    return (\r\n      FavoriteListId.length !== 0\r\n        ?\r\n        <div className=\"container\">\r\n          <ul className=\"cat-cards\">\r\n            {FavoriteListId.map(item => (\r\n              <li\r\n                className=\"cat-card\"\r\n                key={item.id}\r\n                style={{\r\n                  backgroundImage: `url(\"${item.url}\")`\r\n                }}\r\n              >\r\n                <input\r\n                  onClick={(className) => liked(item.id, item.url, className)}\r\n                  type=\"button\"\r\n                  className=\"heart-img like\"\r\n                  value=\"\"\r\n                  name=\"\"\r\n                />\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n        : false\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  state => ({\r\n    Store: state\r\n  }),\r\n)(FavoriteList)\r\n","import React, { useState, useEffect } from 'react';\nimport { Provider, useDispatch } from 'react-redux'\nimport ReactDOM from 'react-dom';\nimport CatList from './CatList'\nimport FavoriteList from './FavortieList'\nimport store, { allPosts, addToLikePost } from './store'\nimport './index.css';\n\nfunction App() {\n  const dispatch = useDispatch();\n  const [fetching, setFetching] = useState(true);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [active, setActive] = useState(false);\n  const [Selection, setSelection] = useState('allCats');\n\n  // подписка на скролл\n  useEffect(() => {\n    document.addEventListener('scroll', scrollHander);\n    return function () {\n      document.removeEventListener('scroll', scrollHander);\n    };\n  }, []);\n\n  useEffect(() => {\n    for (let i = 0; i < localStorage.length; i++) {\n      let key = localStorage.key(i);\n      dispatch(addToLikePost(key, localStorage.getItem(key)));\n    }\n  })\n\n  // загрузка данных + диспатч в стор\n  useEffect(() => {\n    if (fetching) {\n      const fetchData = async () => {\n        let res = await fetch(\n          `https://api.thecatapi.com/v1/images/search?limit=20&page=${currentPage}`\n        );\n        setCurrentPage(prevState => prevState + 1);\n        let response = await res.json();\n        dispatch(allPosts(response));\n      };\n      fetchData().finally(() => setFetching(false));\n    }\n  }, [fetching]);\n  ;\n\n  // проверка конца страницы\n  const scrollHander = (e) => {\n    if (e.target.documentElement.scrollHeight - (e.target.documentElement.scrollTop + window.innerHeight) < 100) { setFetching(true) };\n  };\n\n  //тоггл вкладки\n  const toggleContent = (event) => {\n    const currentState = active;\n    event.preventDefault();\n    setSelection(event.target.value);\n    setActive(!currentState);\n  };\n\n  // отображение нужной вкладки\n  const switchContent = (value) => {\n    switch (value) {\n      case 'allCats':\n        return <CatList />;\n      case 'favoriteCats':\n        return <FavoriteList />;\n      default:\n        return null;\n    };\n  };\n\n  return (\n    <>\n      <header className=\"header\" >\n        <div className=\"container\">\n          <div className=\"nav-items\">\n            <button autoFocus className={Selection === 'allCats' ? 'active' : null} value=\"allCats\" onClick={toggleContent} >Все котики</button>\n            <button className={Selection === 'favoriteCats' ? 'active' : null} value=\"favoriteCats\" onClick={toggleContent} >Любимые котки</button>\n          </div>\n        </div>\n      </header >\n      {switchContent(Selection)}\n    </>\n  );\n}\n\nconst rootElement = document.querySelector('#root');\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider >,\n  rootElement);\n\n\n"],"sourceRoot":""}