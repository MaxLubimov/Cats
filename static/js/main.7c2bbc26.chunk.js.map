{"version":3,"sources":["store.jsx","CatList.jsx","FavortieList.jsx","index.jsx"],"names":["allPosts","data","type","payload","initState","likedPosts","liked","id","url","event","localStorage","setItem","store","dispatch","likePost","target","classList","toggle","createStore","state","action","newSelecredIds","some","ids","removeItem","filter","concat","addLikePost","window","__REDUX_DEVTOOLS_EXTENSION__","CatList","this","props","Store","className","map","style","backgroundImage","onClick","value","name","Component","mapDispatch","createPost","connect","FavoriteList","FavoriteListId","length","item","App","useDispatch","useState","fetching","setFetcing","currentPage","setCurrentPage","active","setActive","Selection","setSelection","useEffect","document","addEventListener","scrollHander","removeEventListener","i","key","getItem","a","fetch","res","prevState","json","response","fetchData","finally","e","documentElement","scrollHeight","scrollTop","innerHeight","toggleContent","currentState","preventDefault","autoFocus","switchContent","rootElement","querySelector","ReactDOM","render"],"mappings":"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","file":"static/js/main.7c2bbc26.chunk.js","sourcesContent":["import { createStore } from 'redux'\r\n\r\nconst likePost = (id, url) => {\r\n  return {\r\n    type: 'TOOGLE_LIKE',\r\n    payload: {\r\n      id,\r\n      url,\r\n    }\r\n  };\r\n};\r\n\r\n// добавляет данные иp localStorage о лайкнутых котах\r\nexport const addToLikePost = (id, url) => {\r\n  return {\r\n    type: 'ADD_TOO_LIKE_POST',\r\n    payload: {\r\n      id,\r\n      url,\r\n    }\r\n  };\r\n};\r\n\r\nexport const allPosts = (data) => {\r\n  return {\r\n    type: 'ALLPOSTS',\r\n    payload: {\r\n      data\r\n    }\r\n  };\r\n};\r\n\r\n\r\nconst initState = {\r\n  likedPosts: [],\r\n  allPosts: [],\r\n};\r\n\r\nconst likeRducer = (state = initState, action) => {\r\n  switch (action.type) {\r\n    case 'TOOGLE_LIKE':\r\n      let newSelecredIds\r\n      if (state.likedPosts.some(ids => ids.id === action.payload.id)) {\r\n        localStorage.removeItem(action.payload.id)\r\n        newSelecredIds = state.likedPosts.filter(ids => ids.id !== action.payload.id)\r\n      }\r\n      else {\r\n        localStorage.setItem(action.payload.id, action.payload.url)\r\n        newSelecredIds = state.likedPosts.concat({\r\n          id: action.payload.id,\r\n          url: action.payload.url\r\n        })\r\n      }\r\n      return {\r\n        ...state,\r\n        likedPosts: newSelecredIds,\r\n      };\r\n    case 'ADD_TOO_LIKE_POST':\r\n      let addLikePost = state.likedPosts.some(ids => ids.id === action.payload.id)\r\n        ? state.likedPosts\r\n        : state.likedPosts.concat({\r\n          id: action.payload.id,\r\n          url: action.payload.url\r\n        })\r\n      return {\r\n        ...state,\r\n        likedPosts: addLikePost\r\n      };\r\n    case 'ALLPOSTS':\r\n      return {\r\n        ...state,\r\n        allPosts: state.allPosts.concat(action.payload.data)\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n// добавление/удаление поста из стор\r\nexport const liked = (id, url, event) => {\r\n  localStorage.setItem(id, url)\r\n  store.dispatch(likePost(id, url));\r\n  event.target.classList.toggle('unlike');\r\n  event.target.classList.toggle('like')\r\n}\r\n\r\nconst store = createStore(\r\n  likeRducer,\r\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__(),\r\n)\r\n\r\nexport default store;\r\n\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { liked, allPosts } from './store'\r\n\r\n// рендер всех котиков\r\nclass CatList extends Component {\r\n  render() {\r\n    const data = this.props.Store.allPosts;\r\n    return (\r\n      <div className=\"container\">\r\n        <ul className=\"cat-cards\">\r\n          {data.map(data => (\r\n            <li\r\n              className=\"cat-card\"\r\n              key={data.id}\r\n              style={{\r\n                backgroundImage: `url(\"${data.url}\")`\r\n              }}\r\n            >\r\n              <input\r\n                onClick={(event) => liked(data.id, data.url, event)}\r\n                type=\"button\"\r\n                className={`heart-img + ${this.props.Store.likedPosts.some(ids => ids.id === data.id) ? 'like' : 'unlike'}`}\r\n                value=\"\"\r\n                name=\"\"\r\n              />\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nconst mapDispatch = {\r\n  createPost: allPosts,\r\n}\r\n\r\nexport default connect(\r\n  state => ({\r\n    Store: state\r\n  }),\r\n  mapDispatch\r\n)(CatList)\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { liked } from './store';\r\n\r\n\r\n// рендер лайкнутых котиков\r\nclass FavoriteList extends Component {\r\n  render() {\r\n    const FavoriteListId = this.props.Store.likedPosts;\r\n    return (\r\n      FavoriteListId.length !== 0\r\n        ?\r\n        <div className=\"container\">\r\n          <ul className=\"cat-cards\">\r\n            {FavoriteListId.map(item => (\r\n              <li\r\n                className=\"cat-card\"\r\n                key={item.id}\r\n                style={{\r\n                  backgroundImage: `url(\"${item.url}\")`\r\n                }}\r\n              >\r\n                <input\r\n                  onClick={(className) => liked(item.id, item.url, className)}\r\n                  type=\"button\"\r\n                  className=\"heart-img like\"\r\n                  value=\"\"\r\n                  name=\"\"\r\n                />\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n        : false\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  state => ({\r\n    Store: state\r\n  }),\r\n)(FavoriteList)\r\n","import React, { useState, useEffect } from 'react';\nimport { Provider, useDispatch } from 'react-redux'\nimport ReactDOM from 'react-dom';\nimport CatList from './CatList'\nimport FavoriteList from './FavortieList'\nimport store, { allPosts, addToLikePost } from './store'\nimport './index.css';\n\nfunction App() {\n  const dispatch = useDispatch();\n  const [fetching, setFetcing] = useState(true);\n  const [currentPage, setCurrentPage] = useState(1)\n  const [active, setActive] = useState(false)\n  const [Selection, setSelection] = useState('allCats')\n\n  // подписка на скролл\n  useEffect(() => {\n    document.addEventListener('scroll', scrollHander)\n    return function () {\n      document.removeEventListener('scroll', scrollHander)\n    };\n  }, [])\n\n  useEffect(() => {\n    for (let i = 0; i < localStorage.length; i++) {\n      let key = localStorage.key(i);\n      dispatch(addToLikePost(key, localStorage.getItem(key)))\n    }\n  })\n\n  // загрузка данных + диспатч в стор\n  useEffect(() => {\n    if (fetching) {\n      const fetchData = async () => {\n        let res = await fetch(\n          `https://api.thecatapi.com/v1/images/search?limit=20&page=${currentPage}`\n        );\n        setCurrentPage(prevState => prevState + 1)\n        let response = await res.json();\n        dispatch(allPosts(response));\n      };\n      fetchData().finally(() => setFetcing(false));\n    }\n  }, [fetching]);\n  ;\n\n  // проверка конца страницы\n  const scrollHander = (e) => {\n    if (e.target.documentElement.scrollHeight - (e.target.documentElement.scrollTop + window.innerHeight) < 100) { setFetcing(true) }\n  }\n\n  //тоггл вкладки\n  const toggleContent = (event) => {\n    const currentState = active;\n    event.preventDefault();\n    setSelection(event.target.value)\n    setActive(!currentState)\n  }\n\n  // отображение нужной вкладки\n  const switchContent = (value) => {\n    switch (value) {\n      case 'allCats':\n        return <CatList />;\n      case 'favoriteCats':\n        return <FavoriteList />;\n      default:\n        return null;\n    }\n  }\n\n  return (\n    <>\n      <header className=\"header\" >\n        <div className=\"container\">\n          <div className=\"nav-items\">\n            <button autoFocus className={Selection === 'allCats' ? 'active' : null} value=\"allCats\" onClick={toggleContent} >Все котики</button>\n            <button className={Selection === 'favoriteCats' ? 'active' : null} value=\"favoriteCats\" onClick={toggleContent} >Любимые котки</button>\n          </div>\n        </div>\n      </header >\n      { switchContent(Selection)}\n    </>\n  )\n}\n\nconst rootElement = document.querySelector('#root');\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider >,\n  rootElement);\n\n\n"],"sourceRoot":""}