(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{33:function(t,e,a){},34:function(t,e,a){"use strict";a.r(e);var n=a(15),c=a.n(n),r=a(18),s=a(19),o=a(5),i=a(0),l=a(2),u=a(6),d=a.n(u),j=a(9),O=a(10),b=a(12),p=a(11),f=a(3),m=a(8),h={likedPosts:[],allPosts:[]},v=function(t,e,a){localStorage.setItem(t,e),g.dispatch(function(t,e){return{type:"TOOGLE_LIKE",payload:{id:t,url:e}}}(t,e)),a.target.classList.toggle("unlike"),a.target.classList.toggle("like")},g=Object(m.b)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"TOOGLE_LIKE":var a;return t.likedPosts.some((function(t){return t.id===e.payload.id}))?(localStorage.removeItem(e.payload.id),a=t.likedPosts.filter((function(t){return t.id!==e.payload.id}))):(localStorage.setItem(e.payload.id,e.payload.url),a=t.likedPosts.concat({id:e.payload.id,url:e.payload.url})),Object(f.a)(Object(f.a)({},t),{},{likedPosts:a});case"ADD_TOO_LIKE_POST":var n=t.likedPosts.some((function(t){return t.id===e.payload.id}))?t.likedPosts:t.likedPosts.concat({id:e.payload.id,url:e.payload.url});return Object(f.a)(Object(f.a)({},t),{},{likedPosts:n});case"ALLPOSTS":return Object(f.a)(Object(f.a)({},t),{},{allPosts:t.allPosts.concat(e.payload.data)});default:return t}}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),y=g,k=a(1),S=function(t){Object(b.a)(a,t);var e=Object(p.a)(a);function a(){return Object(j.a)(this,a),e.apply(this,arguments)}return Object(O.a)(a,[{key:"render",value:function(){var t=this,e=this.props.Store.allPosts;return Object(k.jsx)("div",{className:"container",children:Object(k.jsx)("ul",{className:"cat-cards",children:e.map((function(e){return Object(k.jsx)("li",{className:"cat-card",style:{backgroundImage:'url("'.concat(e.url,'")')},children:Object(k.jsx)("input",{onClick:function(t){return v(e.id,e.url,t)},type:"button",className:"heart-img + ".concat(t.props.Store.likedPosts.some((function(t){return t.id===e.id}))?"like":"unlike"),value:"",name:""})},e.id)}))})})}}]),a}(i.Component),x=Object(l.b)((function(t){return{Store:t}}))(S),E=function(t){Object(b.a)(a,t);var e=Object(p.a)(a);function a(){return Object(j.a)(this,a),e.apply(this,arguments)}return Object(O.a)(a,[{key:"render",value:function(){var t=this.props.Store.likedPosts;return 0!==t.length&&Object(k.jsx)("div",{className:"container",children:Object(k.jsx)("ul",{className:"cat-cards",children:t.map((function(t){return Object(k.jsx)("li",{className:"cat-card",style:{backgroundImage:'url("'.concat(t.url,'")')},children:Object(k.jsx)("input",{onClick:function(e){return v(t.id,t.url,e)},type:"button",className:"heart-img like",value:"",name:""})},t.id)}))})})}}]),a}(i.Component),_=Object(l.b)((function(t){return{Store:t}}))(E);a(33);function P(){var t=Object(l.c)(),e=Object(i.useState)(!0),a=Object(o.a)(e,2),n=a[0],u=a[1],d=Object(i.useState)(1),j=Object(o.a)(d,2),O=j[0],b=j[1],p=Object(i.useState)(!1),f=Object(o.a)(p,2),m=f[0],h=f[1],v=Object(i.useState)("allCats"),g=Object(o.a)(v,2),y=g[0],S=g[1];Object(i.useEffect)((function(){return document.addEventListener("scroll",E),function(){document.removeEventListener("scroll",E)}}),[]),Object(i.useEffect)((function(){for(var e=0;e<localStorage.length;e++){var a=localStorage.key(e);t((n=a,c=localStorage.getItem(a),{type:"ADD_TOO_LIKE_POST",payload:{id:n,url:c}}))}var n,c})),Object(i.useEffect)((function(){n&&function(){var e=Object(s.a)(c.a.mark((function e(){var a,n,s,o,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.thecatapi.com/v1/images/search?limit=10&page=".concat(O));case 2:return a=e.sent,e.next=5,a.json();case 5:if(n=e.sent,s=[],!(window.innerHeight>600)){e.next=14;break}return e.next=10,fetch("https://api.thecatapi.com/v1/images/search?limit=10&page=".concat(O));case 10:return o=e.sent,e.next=13,o.json();case 13:s=e.sent;case 14:i=[].concat(Object(r.a)(n),Object(r.a)(s)),b((function(t){return t+1})),t({type:"ALLPOSTS",payload:{data:i}});case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()().finally((function(){return u(!1)}))}),[n]),console.log(window.innerHeight);var E=function(t){t.target.documentElement.scrollHeight-(t.target.documentElement.scrollTop+window.innerHeight)<100&&u(!0)},P=function(t){var e=m;t.preventDefault(),S(t.target.value),h(!e)};return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("header",{className:"header",children:Object(k.jsx)("div",{className:"container",children:Object(k.jsxs)("div",{className:"nav-items",children:[Object(k.jsx)("button",{autoFocus:!0,className:"allCats"===y?"active":null,value:"allCats",onClick:P,children:"\u0412\u0441\u0435 \u043a\u043e\u0442\u0438\u043a\u0438"}),Object(k.jsx)("button",{className:"favoriteCats"===y?"active":null,value:"favoriteCats",onClick:P,children:"\u041b\u044e\u0431\u0438\u043c\u044b\u0435 \u043a\u043e\u0442\u043a\u0438"})]})})}),function(t){switch(t){case"allCats":return Object(k.jsx)(x,{});case"favoriteCats":return Object(k.jsx)(_,{});default:return null}}(y)]})}var N=document.querySelector("#root");d.a.render(Object(k.jsx)(l.a,{store:y,children:Object(k.jsx)(P,{})}),N)}},[[34,1,2]]]);
//# sourceMappingURL=main.f631a672.chunk.js.map